"use strict";(self.webpackChunkstrengthjournal_app=self.webpackChunkstrengthjournal_app||[]).push([[265],{6265:(ue,b,o)=>{o.r(b),o.d(b,{ExerciseModule:()=>pe});var a=o(3075),f=o(8745),e=o(5e3),m=o(6281),l=o(1958),E=o(3300),g=o(3949),u=o(9808);function y(i,r){if(1&i&&(e.TgZ(0,"option",11),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}const C=function(){return[]};let A=(()=>{class i{constructor(t,s,n){this.exercises=t,this.router=s,this.toast=n,this.enableSubmit=!0,this.exerciseList=null,this.form=new a.cw({name:new a.NI(""),parentExerciseId:new a.NI(null)}),this.subs=new f.Y}ngOnDestroy(){throw new Error("Method not implemented.")}ngOnInit(){this.subs.sink=this.exercises.getAllExercises().subscribe(t=>{this.exerciseList=t.data.filter(s=>null==s.parentExerciseId)})}onSubmit(){this.enableSubmit=!1,this.subs.sink=this.exercises.createExercise(this.form.value.name,this.form.value.parentExerciseId).subscribe(t=>{this.toast.setToast({message:"Exercise created",domClass:"bg-success text-light"}),this.router.navigate(["exercises"])})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.z),e.Y36(l.F0),e.Y36(E.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-new-exercise"]],decls:20,vars:10,consts:[[1,"h3","mb-3"],[1,"row"],["cardTitle","Exercise Details"],["id","validation-form",3,"formGroup","ngSubmit"],[1,"mb-3","error-placeholder"],["type","text","id","name","formControlName","name",1,"form-control"],["formControlName","parentExerciseId",1,"form-control"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-sm","btn-primary"],["routerLink","/exercises",1,"btn","btn-sm","btn-secondary"],[3,"value"]],template:function(t,s){if(1&t&&(e.TgZ(0,"h1",0),e._uU(1,"New Exercise"),e.qZA(),e.TgZ(2,"div",1)(3,"app-card",2)(4,"form",3),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(5,"div",4)(6,"label"),e._uU(7,"Name"),e.qZA(),e._UZ(8,"input",5),e.qZA(),e.TgZ(9,"div",4)(10,"label"),e._uU(11,"Parent Exercise"),e.qZA(),e.TgZ(12,"select",6),e._UZ(13,"option",7),e.YNc(14,y,2,2,"option",8),e.qZA()(),e.TgZ(15,"div")(16,"button",9),e._uU(17,"Create"),e.qZA(),e.TgZ(18,"button",10),e._uU(19,"Cancel"),e.qZA()()()()()),2&t){let n;e.xp6(4),e.Q6J("formGroup",s.form),e.xp6(8),e.ekj("disabled",!s.exerciseList),e.xp6(1),e.Q6J("ngValue",null),e.xp6(1),e.Q6J("ngForOf",null!==(n=s.exerciseList)&&void 0!==n?n:e.DdM(9,C)),e.xp6(2),e.ekj("disabled",!s.enableSubmit),e.xp6(2),e.ekj("disabled",!s.enableSubmit)}},directives:[g.A,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.EJ,a.YN,a.Kr,u.sg,l.rH],styles:[""]}),i})();var L=o(7579),h=o(8505),I=o(4049),v=o(4482),N=o(5403),w=o(8675),D=o(1135),J=o(9841),U=o(5797),Y=o(3268),O=o(9635),F=o(3269);function Z(...i){const r=(0,F.jO)(i);return r?(0,O.z)(Z(...i),(0,Y.Z)(r)):(0,v.e)((t,s)=>{(0,J.l)([t,...(0,U.k)(i)])(s)})}function z(...i){return Z(...i)}var Q=o(3900),T=o(4004),M=o(4110),j=o(5201),$=o(2265);function q(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1," *"),e.qZA())}function V(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"app-table-actions",18),e.NdJ("deleteClicked",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(3).deleteExercise(n.id)}),e.qZA()}}function H(i,r){if(1&i&&(e.TgZ(0,"tr")(1,"td")(2,"a",15),e._uU(3),e.qZA(),e.YNc(4,q,2,0,"span",13),e.qZA(),e.TgZ(5,"td",16),e.YNc(6,V,1,0,"app-table-actions",17),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.Q6J("routerLink",t.id),e.xp6(1),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",t.systemDefined),e.xp6(2),e.Q6J("ngIf",!t.systemDefined)}}function G(i,r){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,H,7,4,"tr",14),e.qZA()),2&i){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function K(i,r){if(1&i&&(e.TgZ(0,"table",11)(1,"thead")(2,"tr")(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th",12),e._uU(6,"Actions"),e.qZA()()(),e.YNc(7,G,2,1,"tbody",13),e.qZA()),2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngIf",!t.loading)}}function P(i,r){1&i&&(e.TgZ(0,"div",19)(1,"div",20)(2,"span",21),e._uU(3,"Loading..."),e.qZA()()())}function R(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"app-confirm-delete",22),e.NdJ("dismissDeleteEvent",function(){return e.CHM(t),e.oxw().dismissDeleteExercise()})("confirmDeleteEvent",function(){return e.CHM(t),e.oxw().confirmDeleteExercise()}),e._uU(1," Deleting this exercise will also delete all related sets. Are you sure you would like to continue?\n"),e.qZA()}}let k=(()=>{class i{constructor(t,s){this.exercises=t,this.router=s,this.page=1,this.pageSize=10,this.collectionSize=0,this.stagedDelete=null,this.loading=!0,this.exerciseSearchInput$=new L.x,this.activeExerciseSearchInput$=this.exerciseSearchInput$.pipe((0,h.b)(()=>this.loading=!0),function S(i,r=I.z){return(0,v.e)((t,s)=>{let n=null,c=null,p=null;const d=()=>{if(n){n.unsubscribe(),n=null;const x=c;c=null,s.next(x)}};function de(){const x=p+i,_=r.now();if(_<x)return n=this.schedule(void 0,x-_),void s.add(n);d()}t.subscribe((0,N.x)(s,x=>{c=x,p=r.now(),n||(n=r.schedule(de,i),s.add(n))},()=>{d(),s.complete()},void 0,()=>{c=n=null}))})}(1e3),(0,w.O)("")),this.pageNumber$=new D.X(this.page),this.exerciseList$=this.pageNumber$.pipe(z(this.activeExerciseSearchInput$),(0,Q.w)(([n,c])=>this.getExercisePage(n,c)),(0,h.b)(()=>this.loading=!1),(0,h.b)(n=>this.collectionSize=n.totalRecords),(0,T.U)(n=>n.data)),this.subs=new f.Y}ngOnDestroy(){this.subs.unsubscribe()}ngOnInit(){}deleteExercise(t){this.stagedDelete=t}dismissDeleteExercise(){this.stagedDelete=null}confirmDeleteExercise(){if(null==this.stagedDelete)throw"Tried to finalize delete but no record it staged";this.subs.sink=this.exercises.deleteExercise(this.stagedDelete).subscribe(()=>{this.stagedDelete=null,this.pageNumber$.next(this.page)})}editExercise(t){this.router.navigate(["exercises",t,"edit"])}nextPage(){this.pageNumber$.next(this.page)}getExercisePage(t,s){return this.exercises.getExercises(t,this.pageSize,s)}searchInputChange(t){this.exerciseSearchInput$.next(t.target.value)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.z),e.Y36(l.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list-exercises"]],decls:18,vars:8,consts:[[1,"h3","mb-3"],[1,"row"],[1,"col-12"],["cardTitle","My Exercise List"],["routerLink","new",1,"btn","btn-primary","buttons-copy","buttons-html5"],[1,"mt-3","error-placeholder"],["id","nameSearch",1,"form-control","mb-3",3,"input"],["class","table table-striped dataTable no-footer dtr-inline collapsed",4,"ngIf"],["class","mb-2 text-center",4,"ngIf"],[3,"page","pageSize","collectionSize","pageChange"],[3,"dismissDeleteEvent","confirmDeleteEvent",4,"ngIf"],[1,"table","table-striped","dataTable","no-footer","dtr-inline","collapsed"],[2,"width","10%"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"table-action"],[3,"deleteClicked",4,"ngIf"],[3,"deleteClicked"],[1,"mb-2","text-center"],["role","status",1,"spinner-grow","me-2"],[1,"sr-only"],[3,"dismissDeleteEvent","confirmDeleteEvent"]],template:function(t,s){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Exercises"),e.qZA(),e.TgZ(2,"div",1)(3,"div",2)(4,"app-card",3)(5,"button",4),e._uU(6,"New Exercise"),e.qZA(),e.TgZ(7,"div",5)(8,"label"),e._uU(9,"Search by name"),e.qZA(),e.TgZ(10,"input",6),e.NdJ("input",function(c){return s.searchInputChange(c)}),e.qZA()(),e.TgZ(11,"p"),e._uU(12," * indicates a system exercise that cannot be deleted or modified. "),e.qZA(),e.YNc(13,K,8,1,"table",7),e.ALo(14,"async"),e.YNc(15,P,4,0,"div",8),e.TgZ(16,"ngb-pagination",9),e.NdJ("pageChange",function(c){return s.page=c})("pageChange",function(){return s.nextPage()}),e.qZA()()()(),e.YNc(17,R,2,0,"app-confirm-delete",10)),2&t&&(e.xp6(13),e.Q6J("ngIf",e.lcZ(14,6,s.exerciseList$)),e.xp6(2),e.Q6J("ngIf",s.loading),e.xp6(1),e.Q6J("page",s.page)("pageSize",s.pageSize)("collectionSize",s.collectionSize),e.xp6(1),e.Q6J("ngIf",s.stagedDelete))},directives:[g.A,l.rH,u.O5,u.sg,l.yS,M.K,j.N9,$.h],pipes:[u.Ov],styles:[""]}),i})();function B(i,r){if(1&i&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}const W=function(){return[]};function X(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"form",5),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmit()}),e.TgZ(1,"div",6)(2,"label"),e._uU(3,"Name"),e.qZA(),e._UZ(4,"input",7),e.qZA(),e.TgZ(5,"div",6)(6,"label"),e._uU(7,"Parent Exercise"),e.qZA(),e.TgZ(8,"select",8),e._UZ(9,"option",9),e.YNc(10,B,2,2,"option",10),e.qZA()(),e.TgZ(11,"div")(12,"button",11),e._uU(13,"Save"),e.qZA(),e.TgZ(14,"button",12),e._uU(15,"Cancel"),e.qZA()()()}if(2&i){const t=e.oxw();let s;e.Q6J("formGroup",t.form),e.xp6(8),e.ekj("disabled",!t.exerciseList),e.xp6(1),e.Q6J("ngValue",null),e.xp6(1),e.Q6J("ngForOf",null!==(s=t.exerciseList)&&void 0!==s?s:e.DdM(9,W)),e.xp6(2),e.ekj("disabled",!t.enableSubmit),e.xp6(2),e.ekj("disabled",!t.enableSubmit)}}function ee(i,r){1&i&&(e.TgZ(0,"div",14)(1,"div",15)(2,"span",16),e._uU(3,"Loading..."),e.qZA()()())}let te=(()=>{class i{constructor(t,s,n,c){this.exercises=t,this.router=s,this.route=n,this.toast=c,this.loadingData=!1,this.enableSubmit=!0,this.id="",this.exerciseList=null,this.form=new a.cw({name:new a.NI(""),parentExerciseId:new a.NI(null)}),this.subs=new f.Y;const p=this.route.snapshot.data.resolvedEditExercise,d=p.exercise;this.form.setValue({name:null==d?void 0:d.name,parentExerciseId:null==d?void 0:d.parentExerciseId}),this.exerciseList=p.exerciseList,this.id=d.id}ngOnDestroy(){this.subs.unsubscribe()}ngOnInit(){}onSubmit(){this.enableSubmit=!1,this.subs.sink=this.exercises.updateExercise(this.id,this.form.value.name,this.form.value.parentExerciseId).subscribe(t=>{this.toast.setToast({message:"Exercise updated",domClass:"bg-success text-light"}),this.enableSubmit=!0,this.router.navigate(["exercises"])})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.z),e.Y36(l.F0),e.Y36(l.gz),e.Y36(E.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-exercise"]],decls:7,vars:2,consts:[[1,"h3","mb-3"],[1,"row"],["cardTitle","Exercise Details"],["id","validation-form",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loading",""],["id","validation-form",3,"formGroup","ngSubmit"],[1,"mb-3","error-placeholder"],["type","text","id","name","formControlName","name",1,"form-control","disabled"],["formControlName","parentExerciseId",1,"form-control"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-sm","btn-primary"],["routerLink","/exercises",1,"btn","btn-sm","btn-secondary"],[3,"value"],[1,"mb-2","text-center"],["role","status",1,"spinner-grow","me-2"],[1,"sr-only"]],template:function(t,s){if(1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Edit Exercise"),e.qZA(),e.TgZ(2,"div",1)(3,"app-card",2),e.YNc(4,X,16,10,"form",3),e.YNc(5,ee,4,0,"ng-template",null,4,e.W1O),e.qZA()()),2&t){const n=e.MAs(6);e.xp6(4),e.Q6J("ngIf",!s.loadingData)("ngIfElse",n)}},directives:[g.A,u.O5,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.EJ,a.YN,a.Kr,u.sg,l.rH],styles:[""]}),i})();var ie=o(946),se=o(9873);function ne(i,r){1&i&&(e.TgZ(0,"button",6),e._uU(1,"Edit"),e.qZA())}let re=(()=>{class i{constructor(t,s,n){this.route=t,this.exercise=s,this.config=n,this.id=null,this.systemDefined=!1;const c=this.route.snapshot.data.exercise;this.name=c.name,this.systemDefined=c.systemDefined,this.id=c.id}displayKg(){return"kg"==this.config.getPreferredWeigthUnit()}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.gz),e.Y36(m.z),e.Y36(ie.E))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-exercise"]],decls:7,vars:5,consts:[[1,"h3","mb-3"],["class","btn btn-primary","routerLink","edit",4,"ngIf"],[1,"row"],[1,"col-12"],["cardTitle","Exercise History",3,"collapseBody"],[3,"exerciseId","displayKg"],["routerLink","edit",1,"btn","btn-primary"]],template:function(t,s){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.YNc(2,ne,2,0,"button",1),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"app-card",4),e._UZ(6,"app-exercise-history",5),e.qZA()()()),2&t&&(e.xp6(1),e.hij("",s.name," "),e.xp6(1),e.Q6J("ngIf",!s.systemDefined),e.xp6(3),e.Q6J("collapseBody",!0),e.xp6(1),e.Q6J("exerciseId",s.id)("displayKg",s.displayKg()))},directives:[u.O5,l.rH,g.A,se._],styles:[""]}),i})(),oe=(()=>{class i{constructor(t){this.exercise=t}resolve(t,s){const n=t.paramMap.get("id");return this.exercise.getAllExercises().pipe((0,T.U)(c=>({exercise:c.data.find(p=>p.id==n),exerciseList:c.data.filter(p=>null==p.parentExerciseId&&p.id!=n)})))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(m.z))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ae=(()=>{class i{constructor(t){this.exercise=t}resolve(t,s){const n=t.paramMap.get("id");if(null==n)throw"Null workout id in route";return this.exercise.getExercise(n)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(m.z))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ce=o(4466);const le=[{path:"",component:k},{path:"new",component:A},{path:":id/edit",component:te,resolve:{resolvedEditExercise:oe}},{path:":id",component:re,resolve:{exercise:ae}}];let pe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[ce.m,l.Bz.forChild(le)]]}),i})()}}]);